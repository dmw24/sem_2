/* css/style.css - Concise Version */

/* CSS variables (kept for maintainability) */
:root {
    --slate-blue: #192238; --off-white: #f7fafc; --white: #fff; --grey-blue: #e2e8f0;
    --dark-grey: #718096; --ember-green: #13CE74; --ember-forest: #0B6638;
    /* Add other ember colors if needed, removed unused ones for brevity */
}

*, *::before, *::after { box-sizing: border-box; }

body {
    background: var(--off-white);
    color: var(--slate-blue);
    font: 14px/1.5 'Poppins', sans-serif; /* Font shorthand */
    margin: 0;
    padding-bottom: 50px;
}

/* Containers */
.container { width: 100%; max-width: 1600px; margin: 0 auto; padding: 20px; position: relative; }
header.container {
    background: var(--white);
    border-bottom: 1px solid var(--grey-blue);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
}
.sim-container.container { background: var(--off-white); box-shadow: none; padding-top: 0; }
.sim-container { display: flex; gap: 20px; }

/* Header Content */
header h1 {
    margin: 15px 0;
    font-size: 2.2em;
    font-weight: 600;
    line-height: 1.2;
    position: relative;
    padding-left: 15px; /* Space for pseudo-element */
}
header h1::before { /* Style the accent bar */
    content: "";
    position: absolute;
    left: 0; top: 0; bottom: 0; /* Center vertically */
    width: 5px;
    background: var(--ember-green);
}
header p.disclaimer { font-size: 0.9em; color: var(--dark-grey); margin: 0 0 1rem 0; }

/* Layout: Sidebar & Content */
#sidebar, #content {
    background: var(--white);
    padding: 1.5rem;
    border: 1px solid var(--grey-blue);
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
#sidebar {
    flex: 0 0 25%; /* flex-grow, flex-shrink, flex-basis */
    min-width: 300px;
    overflow-y: auto;
}
#content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Prevent content overflow issues */
}

/* Content Area Headings & Selectors */
#content h2 { margin: 0 0 1.5rem 0; font-size: 1.5em; font-weight: 600; border-bottom: 1px solid var(--grey-blue); padding-bottom: 0.5rem; }
#content h3.chart-section-heading {
    font-size: 1.3em;
    font-weight: 600;
    margin: 1.5rem 0 1rem 0;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--ember-green);
}
#content h3.chart-section-heading:first-of-type { margin-top: 0; }

#chartViewSelectorContainer, #subsectorSelector, #sankeyYearSelector {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
}
#chartViewSelectorContainer { border-bottom: 1px solid var(--grey-blue); }

#chartViewSelectorContainer label, #subsectorSelector label, #sankeyYearSelector label {
    font-weight: 600; margin-right: 10px; font-size: 1.1em;
}
#chartViewSelectorContainer select, #subsectorSelector select, #sankeyYearSelector select {
    padding: 0.5rem;
    border: 1px solid var(--grey-blue);
    border-radius: 4px;
    font-size: 1em;
    min-width: 200px; /* Slightly reduced min-width */
}

/* Chart Grid & Boxes */
.chart-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; }
.chart-box {
    border: 1px solid var(--grey-blue);
    border-radius: 8px;
    padding: 1.2rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.03);
    height: 380px;
    display: flex; flex-direction: column; /* Use flexbox for canvas sizing */
    background: var(--white); /* Added background just in case */
}
.chart-box h3 { /* Chart titles */
    margin: 0 0 1rem 0;
    font-size: 1.05em;
    font-weight: 600;
    border-bottom: 1px solid #eee;
    padding-bottom: 0.6rem;
    flex-shrink: 0; /* Prevent title from shrinking */
}
.chart-box canvas { flex-grow: 1; min-height: 0; /* Allow canvas to shrink and grow */ max-width: 100%; display: block; }

/* Sidebar Specific Styles */
#sidebar h2 { margin: 0 0 1rem 0; font-size: 1.5em; font-weight: 600; border-bottom: 1px solid var(--grey-blue); padding-bottom: 0.5rem; }

/* Sidebar Groups & Sub-groups */
.group { margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.group:last-child { border-bottom: none; }
.group-title, .sub-group-title {
    font-weight: 600;
    cursor: pointer;
    position: relative;
    padding-left: 18px; /* Space for icon/bar */
    margin: 12px 0 8px 0;
}
.group-title { font-size: 1.15em; }
.sub-group-title { font-size: 1.0em; color: #374151; margin: 8px 0 6px 0; padding-left: 15px; }

.group-title::before, .sub-group-title::before { /* Accent bars */
    content: ""; position: absolute; left: 0; top: 50%; transform: translateY(-50%);
    width: 5px; height: 1.1em; background: var(--ember-green);
}
.sub-group-title::before { width: 4px; height: 1em; background: var(--dark-grey); }

.group-title::after, .sub-group-title::after { /* Toggle icons */
    float: right; font-size: 0.8em; transition: transform 0.2s ease-in-out; margin-right: 5px;
}
.group-title.expanded::after, .sub-group-title.expanded::after { content: "▼"; }
.group-title.collapsed::after, .sub-group-title.collapsed::after { content: "►"; }

.group-content, .sub-group-content { display: none; /* Hidden by default */ margin-top: 8px; }
.group-content { margin-bottom: 10px; padding-left: 5px; border-left: 2px solid var(--grey-blue); }
.sub-group { margin-left: 5px; margin-bottom: 8px; padding-bottom: 4px; border-bottom: 1px dashed #eee; }
.sub-group:last-child { border-bottom: none; }
.sub-group-content { padding-left: 10px; margin-top: 6px; }

/* Sidebar Input Elements */
.activity-growth-input { margin-bottom: 10px; padding: 6px; border: 1px solid #f3f4f6; border-radius: 4px; background: #f9fafb; }
.activity-growth-input label { font-size: 0.85em; font-weight: 600; display: block; margin-bottom: 2px; }
.activity-growth-input input { width: 100%; padding: 0.3rem; font-size: 0.85em; border: 1px solid #ccc; border-radius: 3px; }

.tech-input-container { border: 1px solid #f0f0f0; border-radius: 4px; padding: 8px; margin-bottom: 8px; background: #fafafa; }
.tech-input-container legend { font: 600 0.9em/1.2 sans-serif; margin-bottom: 6px; color: var(--slate-blue); border: none; padding: 0; } /* Font shorthand */

.tech-behavior-selector label { display: inline-block; margin-right: 8px; font-size: 0.85em; }
.tech-behavior-selector select { display: inline-block; width: auto; padding: 0.2rem 0.4rem; font-size: 0.85em; margin-bottom: 6px; border: 1px solid #ccc; border-radius: 3px; }

.s-curve-inputs { display: none; /* Hidden by default */ padding-left: 8px; border-left: 2px solid var(--ember-green); margin-top: 6px; }
.s-curve-inputs label { display: block; font-size: 0.8em; margin-bottom: 1px; }
.s-curve-inputs input { display: block; width: 95%; font-size: 0.8em; padding: 0.3rem; margin-bottom: 4px; border: 1px solid #ccc; border-radius: 3px; }
.s-curve-inputs small { display: block; font-size: 0.75em; color: var(--dark-grey); margin: 0 0 8px 2px; } /* Adjusted small font/margin */

#runModelBtn {
    width: 100%;
    padding: 12px;
    margin-bottom: 1.5rem;
    font: 600 1.1rem/1 sans-serif; /* Font shorthand */
    border: none; border-radius: 6px;
    background-color: var(--ember-green); color: var(--white);
    cursor: pointer; transition: background-color 0.2s;
}
#runModelBtn:hover:not(:disabled) { background-color: var(--ember-forest); }
#runModelBtn:disabled { background-color: var(--dark-grey); cursor: not-allowed; opacity: 0.7; }

/* Utility & Footer */
.hidden { display: none !important; }
footer { width: 100%; background: var(--white); border-top: 1px solid var(--grey-blue); text-align: center; padding: 12px; font-size: 0.85em; color: var(--dark-grey); margin-top: 2rem; }

/* Responsive Adjustments */
@media screen and (max-width: 1200px) {
    .sim-container { flex-direction: column; }
    #sidebar { width: 100%; flex-basis: auto; min-width: unset; margin-bottom: 20px; }
    .chart-grid { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
    .chart-box { height: 350px; }
}
@media screen and (max-width: 768px) {
    header.container h1 { font-size: 1.8em; }
    #sidebar h2, #content h2 { font-size: 1.3em; }
    #content h3.chart-section-heading { font-size: 1.1em; }
    .chart-grid { grid-template-columns: 1fr; } /* Single column on small screens */
    .chart-box { height: 320px; }
}
